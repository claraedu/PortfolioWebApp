@model IEnumerable<PortfolioViewer.Models.Portfolio.MonthlyPerformance>



    <table id="performanceTable" class="table table-striped table-hover">
        <thead class="thead-light">
            <tr>
                <th scope="col">Year</th>
                <th scope="col">Month</th>
                <th scope="col">Portfolio Performance</th>
                <th scope="col">Benchmark Performance</th>
            </tr>
        </thead>
        <tbody>
            @foreach (PortfolioViewer.Models.Portfolio.MonthlyPerformance item in Model)
            {
                <tr>
                    <td class="yearTD">@item.Year</td>
                    <td class="monthTD">@item.Month</td>
                    <td class="portfolioPerformanceTD">@Math.Round(item.Portfolio_Performance.Value,2)%</td>
                    <td class="benchmarkPerformanceTD">@Math.Round(item.Benchmark_Performance.Value,2)%</td>
                </tr>
            }

        </tbody>
    </table>

    <canvas id="performanceCanvas" width="400" height="400"></canvas>


<script>
    var rawDataPortfolio = []
    var rawDataBench = []
    var labels = []

    $('#performanceTable .portfolioPerformanceTD').each(function () {
        rawDataPortfolio.push(parseFloat($(this).html().replace(',', '.')));
    });

    $('#performanceTable .benchmarkPerformanceTD').each(function () {
        rawDataBench.push(parseFloat($(this).html().replace(',', '.')));
    });

    $('#performanceTable .monthTD').each(function () {
        labels.push($(this).html());
    });

    console.log(rawDataPortfolio, labels)

    var data = {
        labels: labels,
        datasets: [{
            label: '% of performance gains',
            fill: false,
            data: rawDataPortfolio,
            backgroundColor: 'rgba(100, 255, 132, 0.4)',
            borderColor: 'rgba(100,255,132,1)',
            borderWidth: 3
        },
            {
                label: '% of benchmark gains',
                fill: false,
            data: rawDataBench,
            backgroundColor: 'rgba(255, 99, 132, 0.2)',
            borderColor: 'rgba(255,99,132,1)',
            borderWidth: 3
            }]
    }

    var opt = {
        title: {
            display: true,
            text: 'Performance Graph'
        },
        tooltips: {
            mode: 'index',
            intersect: false,
        },
        hover: {
            mode: 'nearest',
            intersect: true
        }
    }

    var ctx = document.getElementById("performanceCanvas").getContext('2d');

    $(document).ready(function () {
        var chart = new Chart(ctx, {
            type: 'line',
            data: data,
            options: opt
        })
    })


</script>





